<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Pump Master Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .hidden { display: none; }
    .pump-list { margin-top: 20px; }
    .pump-item { padding: 5px; border-bottom: 1px solid #ddd; }
    .modal { background: #f9f9f9; padding: 20px; border: 1px solid #333; width: 300px; }
  </style>
</head>
<body>

  <!-- Login Page -->
  <div id="login-page">
    <h2>Login</h2>
    <label>Username: <input id="username" type="text" /></label><br><br>
    <label>Password: <input id="password" type="password" /></label><br><br>
    <button id="login-btn">Login</button>
    <p id="login-error" style="color:red;"></p>
  </div>

  <!-- Pumps Overview Page -->
  <div id="pumps-page" class="hidden">
    <h2>Pumps Overview</h2>
    <input id="search" placeholder="Search pumps..." />
    <button id="add-pump-btn">Add Pump</button>

    <div class="pump-list" id="pump-list">
      <!-- Pumps will appear here -->
    </div>
  </div>

  <!-- Pump Modal -->
  <div id="pump-modal" class="hidden modal">
    <h3 id="modal-title">Add/Edit Pump</h3>
    <label>Name: <input id="pump-name" type="text" /></label><br><br>
    <label>Location: <input id="pump-location" type="text" /></label><br><br>
    <button id="save-pump-btn">Save Pump</button>
    <button id="close-modal-btn">Cancel</button>
  </div>

  <script>
    // Simulate user session
    const user = { username: 'farmer', password: '1234' };

    // Fake pump data
    let pumps = [
      { id: 1, name: 'Field Pump 1', location: 'Field A' },
      { id: 2, name: 'Well Pump', location: 'Field B' }
    ];
    let editingPumpId = null;

    const loginPage = document.getElementById('login-page');
    const pumpsPage = document.getElementById('pumps-page');
    const pumpList = document.getElementById('pump-list');
    const searchInput = document.getElementById('search');

    const pumpModal = document.getElementById('pump-modal');
    const modalTitle = document.getElementById('modal-title');
    const pumpNameInput = document.getElementById('pump-name');
    const pumpLocationInput = document.getElementById('pump-location');

    document.getElementById('login-btn').addEventListener('click', () => {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if (username === user.username && password === user.password) {
        loginPage.classList.add('hidden');
        pumpsPage.classList.remove('hidden');
        renderPumps();
      } else {
        document.getElementById('login-error').textContent = 'Invalid credentials';
      }
    });

    document.getElementById('add-pump-btn').addEventListener('click', () => {
      editingPumpId = null;
      pumpNameInput.value = '';
      pumpLocationInput.value = '';
      modalTitle.textContent = 'Add Pump';
      pumpModal.classList.remove('hidden');
    });

    document.getElementById('save-pump-btn').addEventListener('click', () => {
      const name = pumpNameInput.value.trim();
      const location = pumpLocationInput.value.trim();
      if (!name || !location) return;

      if (editingPumpId) {
        const pump = pumps.find(p => p.id === editingPumpId);
        pump.name = name;
        pump.location = location;
      } else {
        pumps.push({ id: Date.now(), name, location });
      }

      pumpModal.classList.add('hidden');
      renderPumps();
    });

    document.getElementById('close-modal-btn').addEventListener('click', () => {
      pumpModal.classList.add('hidden');
    });

    searchInput.addEventListener('input', renderPumps);

    function renderPumps() {
      const filter = searchInput.value.toLowerCase();
      pumpList.innerHTML = '';

      pumps
        .filter(p => p.name.toLowerCase().includes(filter))
        .forEach(pump => {
          const div = document.createElement('div');
          div.className = 'pump-item';
          div.innerHTML = `<strong>${pump.name}</strong> - ${pump.location}
            <button onclick="editPump(${pump.id})">Edit</button>`;
          pumpList.appendChild(div);
        });
    }

    window.editPump = (id) => {
      const pump = pumps.find(p => p.id === id);
      if (!pump) return;

      editingPumpId = id;
      pumpNameInput.value = pump.name;
      pumpLocationInput.value = pump.location;
      modalTitle.textContent = 'Edit Pump';
      pumpModal.classList.remove('hidden');
    };
  </script>
</body>
</html>
